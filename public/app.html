<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime EXT - App</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #121212;
    overflow-x: hidden;
  }
  canvas#stars {
    position: fixed;
    top: 0;
    left: 0;
    z-index: 0;
  }
  .navbar {
    z-index: 10;
    background-color: rgba(18,18,18,0.95);
  }
  .navbar-brand img {
    height: 40px;
  }
  header {
    padding: 100px 20px 40px;
    text-align: center;
    position: relative;
    z-index: 1;
  }
  header h1 {
    color: #00fa9a;
    font-size: 2.8rem;
    font-weight: 700;
    margin-bottom: 10px;
  }
  header p {
    font-size: 1.2rem;
    color: #b0b0b0;
    margin-bottom: 30px;
  }
  .download-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 18px 45px;
    background-color: #00fa9a;
    color: #121212;
    font-weight: 600;
    font-size: 1.3rem;
    border-radius: 50px;
    text-decoration: none;
    transition: 0.3s;
  }
  .download-btn:hover {
    background-color: #00c17c;
    color: #fff;
  }
  .features {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
    margin: 60px 0;
    position: relative;
    z-index: 1;
  }
  .feature-card {
    background-color: #1e1e1e;
    border-radius: 15px;
    padding: 30px 20px;
    width: 240px;
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
    box-shadow: 0px 4px 15px rgba(0,0,0,0.3);
    color:#ffff;
  }
  .feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0px 8px 25px rgba(0, 250, 154, 0.4);
  }
  .feature-card i {
    font-size: 2.2rem;
    color: #00fa9a;
    margin-bottom: 15px;
  }
  .carousel-item img {
    max-height: 600px;
    margin: 0 auto;
    border-radius: 20px;
    object-fit: contain;
  }
  .carousel-control-prev-icon,
  .carousel-control-next-icon {
    background-color: #00ff9d;
    border-radius: 50%;
    padding: 10px;
  }
  .carousel-indicators [data-bs-target] {
    background-color: #00fa9a;
    top: 0;
  }
  .carousel-indicators {
    top: 0;
  }
  .hero-badge {
    background-color: #00fa9a;
    color: #121212;
    padding: 12px 20px;
    border-radius: 30px;
    font-weight: 600;
    display: inline-block;
    margin-bottom: 20px;
  }
  footer {
    text-align: center;
    padding: 25px;
    border-top: 1px solid #2c2c2c;
    color: #888;
    position: relative;
    z-index: 1;
  }
  footer a i:hover {
    color: #00f2fa;
  }
.logo-svg{height:80px;flex-shrink:0;flex-grow:0;width:auto}
.logo-svg text{transition:fill .3s ease}
.logo-svg .main-text,.logo-svg .subtext{fill:white}
.logo-svg .ext-text{fill:#00bfff}
body.light-theme .logo-svg .main-text,body.light-theme .logo-svg .subtext{fill:#111}
body.light-theme .logo-svg .ext-text{fill:#2e94dc}
.topbar{position:fixed;top:0;left:0;right:0;height:70px;background:#181818;border-bottom:1px solid #333;display:flex;align-items:center;padding:0 20px;gap:20px;z-index:1050}
.topbar img{height:65px;user-select:none;margin-right:auto;flex-shrink:0}
</style>
</head>
<body>

<canvas id="stars"></canvas>

<!--  Nueva Topbar -->
<header class="topbar d-flex align-items-center">
  <a href="/" class="logo">
    <svg viewBox="0 0 300 120" class="logo-svg" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
      <text x="10" y="60" font-family="Alice, serif" font-size="36" font-weight="bold">
        <tspan class="main-text">Anime </tspan>
        <tspan class="ext-text">EXT</tspan>
      </text>
      <path d="M220,30 L230,60 L220,90" stroke="#3C873A" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" />
      <text x="100" y="90" text-anchor="middle" font-family="sans-serif" font-size="14" class="subtext">°濂姐绉</text>
    </svg>
  </a>
</header>

<header class="hero">
  <span class="hero-badge">隆No necesitas navegador!</span>
  <h1>Anime EXT App</h1>
  <p>Abre la app y empieza a ver tus animes favoritos al instante, r谩pida, ligera y siempre a la mano. Anime Ext App {version}</p>
  <a href="https://animeext.xo.je/app/" class="download-btn">
    <i class="bi bi-download"></i> Descargar APK
  </a>
</header>

<section class="features">
  <div class="feature-card">
    <i class="bi bi-speedometer2"></i>
    <h3>R谩pida</h3>
    <p>Optimizada para cargar los episodios.</p>
  </div>
  <div class="feature-card">
    <i class="bi bi-moon-stars-fill"></i>
    <h3>Modo Oscuro</h3>
    <p>Ver anime de noche sin cansar la vista.</p>
  </div>
  <div class="feature-card">
    <!-- FUNCIONES EXCLUSIVAS -->
    <i class="bi bi-star-fill"></i>
    <h3>Funciones Exclusivas</h3>
    <p>Funciones exclusivas en la app para mejorar su experiencia.</p>
  </div>
</section>

<section class="mockup my-5 text-center">
  <h2 style="color:#00fa9a; margin-bottom:30px;">Capturas de la App</h2>
  <div id="screenshotsCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner" id="carousel-inner"></div>
    <button class="carousel-control-prev" type="button" data-bs-target="#screenshotsCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#screenshotsCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Siguiente</span>
    </button>
  </div>
</section>

<footer>
  <div class="carousel-indicators" id="carousel-indicators"></div>
  Anime EXT 漏 2025 路 
  <a href="https://github.com/Chikyqwe/AnimeExt/" target="_blank" class="text-decoration-none text-secondary" style="position: relative; z-index: 10000000000;">
    <i class="bi bi-github" style="font-size: 1.5rem;"></i>
  </a>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Funci贸n para actualizar la info de la app y el carrusel
async function updateAppInfo() {
  try {
    // 1锔 Obtener versi贸n actual
    const res = await fetch('/app/v');
    if (!res.ok) throw new Error('Error al obtener la versi贸n');
    const data = await res.json();
    const actual = data.actual;

    // Actualizar bot贸n de descarga y texto de versi贸n
    const downloadBtn = document.querySelector('.download-btn');
    const heroText = document.querySelector('header.hero p');
    if (actual && actual.code) {
      downloadBtn.href = `https://animeext.xo.je/app/beta/dw.php?version=${actual.code}`;
      heroText.textContent = `Abre la app y empieza a ver tus animes favoritos al instante, r谩pida, ligera y siempre a la mano. Anime Ext App ${actual.version}`;
    } else {
      downloadBtn.href = '#';
      console.warn('No hay versi贸n actual disponible.');
    }

    // 2锔 Obtener screenshots del endpoint
    const screenshotsRes = await fetch('/app/screenshots');
    if (!screenshotsRes.ok) throw new Error('Error al obtener screenshots');
    const screenshots = await screenshotsRes.json();

    // 3锔 Construir carrusel din谩mico
    const carouselInner = document.getElementById('carousel-inner');
    const carouselIndicators = document.getElementById('carousel-indicators');
    carouselInner.innerHTML = '';
    carouselIndicators.innerHTML = '';

    screenshots.forEach((name, index) => {
      const imgUrl = `/app/images/${name}`;

      // Item del carrusel
      const item = document.createElement('div');
      item.className = 'carousel-item' + (index === 0 ? ' active' : '');
      const img = document.createElement('img');
      img.src = imgUrl;
      img.className = 'd-block w-75';
      img.alt = `Screenshot ${index + 1}`;
      item.appendChild(img);
      carouselInner.appendChild(item);

      // Indicador del carrusel
      const indicator = document.createElement('button');
      indicator.type = 'button';
      indicator.setAttribute('data-bs-target', '#screenshotsCarousel');
      indicator.setAttribute('data-bs-slide-to', index);
      if (index === 0) indicator.className = 'active';
      carouselIndicators.appendChild(indicator);
    });

  } catch (err) {
    console.error('No se pudo actualizar la app:', err);
  }
}

// Ejecutar al cargar
updateAppInfo();


//  Fondo estrellado
const canvas = document.getElementById('stars');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const stars = Array.from({length: 200}, () => ({
  x: Math.random()*canvas.width,
  y: Math.random()*canvas.height,
  r: Math.random()*1.2,
  d: Math.random()*0.5
}));

function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#fff';
  stars.forEach(s=>{
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
    s.y += s.d;
    if(s.y>canvas.height){s.y=0; s.x=Math.random()*canvas.width;}
  });
  requestAnimationFrame(drawStars);
}
drawStars();

window.addEventListener('resize', ()=>{
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>



</body>
</html>
