<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Scraper Logs</title>
  <style>
    body { font-family: monospace; background: #111; color: #0f0; padding: 1em; }
    #logs { white-space: pre-wrap; max-height: 80vh; overflow-y: auto; border: 1px solid #333; padding: 1em; }
  </style>
</head>
<body>
  <h1>üõ∞Ô∏è Logs del Scraper</h1>
  <button onclick="iniciarScraping()">Iniciar Scraping</button>
  <div id="logs"></div>

  <script>
    function iniciarScraping() {
      const logBox = document.getElementById("logs");
      logBox.innerText = "Iniciando scraping...\n";

      const source = new EventSource("/api/scrap/logs");

      source.onmessage = (event) => {
        logBox.innerText += event.data + "\n";
        logBox.scrollTop = logBox.scrollHeight;
      };

      source.addEventListener("end", () => {
        logBox.innerText += "\n‚úÖ Scraping completado.\n";
        source.close();
      });

      source.onerror = (e) => {
        logBox.innerText += "\n‚ùå Error durante el scraping.\n";
        source.close();
      };
    }
  </script>
</body>
</html>
