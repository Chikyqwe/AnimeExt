<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Anime EXT - Tu Mundo Anime</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <!-- Google fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Delius+Swash+Caps&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <!-- Tus estilos CSS -->
  <link rel="stylesheet" href="static/styles.css" />
  <link rel="stylesheet" href="static/styles_index.css" />
</head>

<body>  
<div class="modal fade" id="continueWatchingModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-md">
    <div class="modal-content" style="background:#222; color:#fff; border-radius:12px; overflow:hidden;">
      
      <!-- Header -->
      <div class="modal-header border-0">
        <h5 class="modal-title-S fw-bold" id="continue-watching-title">Continuar viendo</h5>
        <button type="button" data-bs-dismiss="modal" aria-label="Cerrar" style="background:none;border:none;font-size:1.2rem;"><i class="fa fa-xmark" style="color: rgb(241, 241, 241); transition: color 0.3s;"></i></button>
      </div>
      
      <!-- Body -->
      <div class="modal-body text-center">
        <img id="continue-watching-img" src="" alt="Anime" 
             class="img-fluid rounded mb-3" style="object-fit:cover;">
        
        <button id="continue-watching-btn" class="btn btn-success fw-semibold px-4">
          <i class="fa fa-play me-1"></i> Continuar viendo
        </button>
      </div>
    </div>
  </div>
</div>


<div id="loader">
  <div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
</div>

<header class="topbar d-flex align-items-center">
  <a href="#" class="logo">
    <svg viewBox="0 0 300 120" class="logo-svg" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
      <text x="10" y="60" font-family="Alice, serif" font-size="36" font-weight="bold">
        <tspan class="main-text">Anime </tspan>
        <tspan class="ext-text">EXT</tspan>
      </text>
      <path d="M220,30 L230,60 L220,90" stroke="#3C873A" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" />
      <text x="100" y="90" text-anchor="middle" font-family="sans-serif" font-size="14" class="subtext">アニメが好きな私たち</text>
    </svg>
  </a>

  <!-- Botón hamburguesa para móvil -->
  <button id="hamburgerBtn"class="btn btn-outline-light me-2" type="button" aria-label="Abrir menú">
    <i class="fa fa-bars fa-lg"></i>
  </button>

  <nav class="main-nav d-none d-md-flex">
    <a href="#" id="navInicio" class="nav-item active" onclick="mostrarInicio(event)">Inicio</a>
    <a href="#" id="navDirectorio" class="nav-item" onclick="mostrarDirectorio(event)">Directory</a>
  </nav>

  <form class="search-form d-flex ms-auto align-items-center" role="search" onsubmit="searchAnime(event)">
    <button type="button" id="search-toggle-btn" class="btn btn-outline-light d-md-none">
      <i class="fa fa-search"></i>
    </button>
    <input id="searchInput" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="form-control me-2 d-none d-md-block" type="search" placeholder="Buscar anime..." aria-label="Buscar" />
    <button class="btn btn-outline-light d-none d-md-block" type="submit">
      <i class="fa fa-search"></i>
    </button>
    <ul id="search-suggestions" class="suggestions-list"></ul>
  </form>
  <div id="mobileDropdownMenu" role="menu" aria-hidden="true">
    <a href="#" id="mobileNavInicio" class="active" role="menuitem" onclick="mostrarInicio(event); toggleMobileMenu(false)">Inicio</a>
    <a href="#" id="mobileNavDirectorio" role="menuitem" onclick="mostrarDirectorio(event); toggleMobileMenu(false)">Directory</a>
  </div> 
</header>
<div class="layout-container">
  <aside class="sidebar">
    <h3 class="sidebar-title">Animes en emisión</h3>
    <ul class="sidebar-menu"></ul>
  </aside>

  <main class="main-content">
    <div id="anime-section">
      <h2 class="section-title">Últimos Episodios</h2>
      <div id="anime-list" class="anime-grid"></div>
    </div>

    <div id="directory-section" class="d-none">
      <h2 class="section-title">Nuestros Animes</h2>
      <div class="card-container" id="card-container"></div>
    </div>
  </main>
</div>

<div class="bottom-bar">
  <button class="bottom-btn" onclick="abrirMenuOpciones()"><i class="fa fa-bars"></i></button>
  <div id="pagination-controls" class="pagination-controls d-none"></div>
  <button class="bottom-btn" onclick="mostrarFavoritosEnModal()"><i class="fa fa-heart"></i></button>
</div>

<div id="policyOverlay" class="policy-overlay d-none">
  <div class="policy-modal">
    <div class="policy-header d-flex justify-content-between align-items-center">
      <h5 class="m-0">Política de Privacidad</h5>
      <button onclick="cerrarOverlay('policyOverlay')" style="background:none;border:none;font-size:1.2rem;"><i class="fa fa-xmark"></i></button>
    </div>
    <iframe id="policyIframe" class="policy-iframe" loading="lazy"></iframe>
    <div class="policy-footer text-end">
      <button id="policyAcceptBtn" class="btn btn-success fw-semibold px-4">Aceptar</button>
    </div>
  </div>
</div>

<div id="adsOverlay" class="policy-overlay d-none">
  <div class="policy-modal">
    <div class="mb-3"><i class="fa-solid fa-tv fa-2x text-info"></i></div>
    <h3 class="mb-2">¿Cómo prefieres ver tus animes?</h3>
    <p class="px-2">Puedes elegir ver los episodios con <span class="text-success fw-semibold">anuncios</span> o sin anuncios.</p>
    <div class="d-flex flex-column flex-sm-row gap-3 justify-content-center mt-3">
      <button class="btn btn-success fw-semibold" onclick="setAdsPreference(true)">
        <i class="fa-solid fa-bolt me-1"></i> Con anuncios
      </button>
      <button class="btn btn-outline-light fw-semibold" onclick="setAdsPreference(false)">
        <i class="fa-solid fa-clock me-1"></i> Sin anuncios
      </button>
    </div>
  </div>
</div>

<div id="menuOverlay" class="policy-overlay d-none">
  <div class="policy-modal">
    <div class="policy-header d-flex justify-content-between align-items-center">
      <i class="fa fa-gear"></i>
      <div><center><span>AnimeExt 14.7.1</span></center></div>
      <button onclick="cerrarOverlay('menuOverlay')" style="background:none;border:none;font-size:1.2rem;"><i class="fa fa-xmark"></i></button>
    </div>
    
    <div class="menu-grid">
      <div id="bottomThemeIcon" class="menu-circle" onclick="toggleTheme()">
        <i id="themeIcon" class="fa fa-moon"></i>
        <div class="menu-text">Tema</div>
      </div>
      <div class="menu-circle" onclick="verAds()">
        <i class="fa fa-tv"></i>
        <div class="menu-text">Anuncios</div>
      </div>
      <div class="menu-circle" onclick="verPolitica()">
        <i class="fa fa-scale-balanced"></i>
        <div class="menu-text">Privacidad</div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="animeModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered modal-fullscreen-sm-down">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" id="modalCloseBtn" data-bs-dismiss="modal" aria-label="Cerrar" style="background-color: transparent; border: none; font-size: 1.5rem;">
          <i class="fa fa-xmark" style="color: white;"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="modal-left">
          <img id="modalImage" class="modal-img" src="" alt="Anime Image" />
        </div>
        <div class="modal-info">
          <h2 id="modalTitle" class="modal-title"></h2>
          <div class="modal-description">
            <h3 class="description-title">Descripción</h3>
            <p id="modalDescription" class="description-text">Function in development, introduction for the next actualization.</p>
          </div>
          <div id="episodes-list" class="episodes-list"></div>
          <div class="d-flex justify-content-between align-items-center mt-3">
            <button id="favoriteBtn" class="btn btn-outline-light">
              <i class="fa fa-heart"></i> Agregar a Favoritos
            </button>
            <button id="shareBtn" class="btn btn-outline-light">
              <i class="fa fa-share-alt"></i> Compartir
            </button>
          </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-dialog modal-lg modal-dialog-scrollable" style="display: none;">
  <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalFavoritosLabel">Favoritos</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div id="favoritosContainer" class="d-flex flex-wrap justify-content-start gap-3"></div>
      </div>                
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="static/index.js"></script>
<script src="static/functions_index.js"></script>
<script>
  console.info("%cAnime EXT - Tu Mundo Anime\n%cDesarrollado por Chiki & Chikiqwe","color: #3C873A; font-size: 1.5rem; font-weight: bold;","color: #888; font-size: 1rem;");
</script>
</body>
</html>
